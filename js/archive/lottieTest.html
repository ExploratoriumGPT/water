<html>

    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.8/lottie.min.js"></script>
    </head>

    <body>
        <div id="animatedWaterLottie" style="
        position: absolute;
        top: 205px;
        left: 50%;
        width: 265px;
        height: 265px;
        transform: translateX(-50%);">
        </div>
        <img src="./svg-bg/filling.svg" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 1;" />

        <script>
            window.onload = function () {
                var animation = lottie.loadAnimation({
                    container: document.getElementById('animatedWaterLottie'), // the dom element that will contain the animation
                    renderer: 'svg',
                    loop: false,
                    autoplay: false,
                    path: './water.json' // the path to the animation json
                });

                var isFilling = true;
                window.addEventListener('click', function () {
                    animateWater(isFilling);
                    isFilling = !isFilling; // toggle between 1 and -1 each time the animation is clicked
                });

                function animateWater(isFilling) {
                    let animationDuration = animation.getDuration(true) / 140//fps, i guess?
                    if (isFilling) {
                        // console.log('filling animation');
                        animation.setDirection(1);
                        let fillDuration = 2.80;
                        let timeScale = animationDuration / fillDuration;
                        animation.setSpeed(timeScale);
                        animation.play();
                    } else {
                        // console.log('draining animation');
                        animation.setDirection(-1);
                        let drainDuration = 6.80;
                        let timeScale = animationDuration / drainDuration;
                        animation.setSpeed(timeScale);
                        animation.play();
                    }
                }
            }
        </script>
    </body>

</html>